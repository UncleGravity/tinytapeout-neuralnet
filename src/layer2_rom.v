/*
 * Layer 2 ROM Module
 *
 * Auto-generated from weights.npz - DO NOT EDIT
 *
 * Uses localparam for gate-level simulation compatibility.
 * Approach based on Tiny Tapeout 02 charRom.v pattern.
 *
 * Memory:
 *   - 480 weights (10 neurons Ã— 48 inputs, 2-bit ternary)
 *   - 10 biases (4-bit signed)
 */

module layer2_rom (
    input  wire [8:0] weight_addr,  // Address for weight lookup (0-479)
    input  wire [3:0] bias_addr,    // Address for bias lookup (0-9)
    output wire [1:0] weight_data,  // Weight output
    output wire [3:0] bias_data     // Bias output
);

    // Weight ROM: 480 entries, 2-bit each = 960 bits total
    // Using single-dimension packed array for Iverilog compatibility
    localparam [959:0] WEIGHTS = {
        2'b11,
        2'b00,
        2'b00,
        2'b00,
        2'b11,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b01,
        2'b11,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b11,
        2'b11,
        2'b00,
        2'b00,
        2'b11,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b01,
        2'b01,
        2'b00,
        2'b11,
        2'b00,
        2'b01,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b11,
        2'b00,
        2'b00,
        2'b11,
        2'b00,
        2'b11,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b01,
        2'b00,
        2'b01,
        2'b01,
        2'b00,
        2'b11,
        2'b00,
        2'b11,
        2'b01,
        2'b11,
        2'b00,
        2'b11,
        2'b11,
        2'b00,
        2'b11,
        2'b00,
        2'b00,
        2'b01,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b01,
        2'b01,
        2'b11,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b01,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b01,
        2'b01,
        2'b00,
        2'b11,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b11,
        2'b00,
        2'b00,
        2'b11,
        2'b00,
        2'b00,
        2'b11,
        2'b00,
        2'b00,
        2'b00,
        2'b11,
        2'b01,
        2'b00,
        2'b00,
        2'b11,
        2'b01,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b01,
        2'b00,
        2'b11,
        2'b00,
        2'b01,
        2'b01,
        2'b00,
        2'b00,
        2'b11,
        2'b01,
        2'b11,
        2'b00,
        2'b11,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b01,
        2'b01,
        2'b11,
        2'b00,
        2'b00,
        2'b11,
        2'b01,
        2'b11,
        2'b00,
        2'b11,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b11,
        2'b00,
        2'b11,
        2'b11,
        2'b00,
        2'b00,
        2'b11,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b11,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b01,
        2'b11,
        2'b00,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b01,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b01,
        2'b11,
        2'b11,
        2'b00,
        2'b00,
        2'b01,
        2'b01,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b11,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b01,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b01,
        2'b11,
        2'b11,
        2'b11,
        2'b00,
        2'b11,
        2'b01,
        2'b00,
        2'b11,
        2'b11,
        2'b01,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b01,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b11,
        2'b00,
        2'b01,
        2'b11,
        2'b01,
        2'b11,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b01,
        2'b00,
        2'b11,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b11,
        2'b00,
        2'b01,
        2'b11,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b01,
        2'b00,
        2'b11,
        2'b00,
        2'b00,
        2'b01,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b11,
        2'b00,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b01,
        2'b11,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b11,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b01,
        2'b00,
        2'b11,
        2'b00,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b01,
        2'b01,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b11,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b11,
        2'b00,
        2'b11,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b01,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b11,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b01,
        2'b01,
        2'b00,
        2'b11,
        2'b11,
        2'b11,
        2'b01,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b11,
        2'b00,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b11,
        2'b00,
        2'b00,
        2'b01,
        2'b11,
        2'b00,
        2'b01,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b01,
        2'b11,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b11,
        2'b11,
        2'b00,
        2'b01,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b00,
        2'b11,
        2'b00,
        2'b01,
        2'b11,
        2'b11,
        2'b00,
        2'b11,
        2'b00,
        2'b00,
        2'b00,
        2'b11,
        2'b00,
        2'b00,
        2'b11,
        2'b00,
        2'b11,
        2'b00,
        2'b11,
        2'b00
    };

    // Bias ROM: 10 entries, 4-bit each = 40 bits total
    localparam [39:0] BIASES = {
        4'h0,
        4'h2,
        4'hF,
        4'hE,
        4'h3,
        4'hF,
        4'h1,
        4'h0,
        4'hF,
        4'hE
    };

    // Combinational lookups - extract bits from flat array
    assign weight_data = WEIGHTS[weight_addr*2 +: 2];
    assign bias_data = BIASES[bias_addr*4 +: 4];

endmodule
